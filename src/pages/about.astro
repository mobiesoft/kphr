---
import MainLayout from '@/layouts/MainLayout.astro';
import { ISPARTOF } from '@/data/constants';
import { Image } from 'astro:assets';
import Button from '@/components/ui/Button.astro';
import Card from '@/components/ui/Card.astro';
import CardContent from '@/components/ui/CardContent.astro';
import { getCollection } from 'astro:content';

// Get about page content from collection
const aboutEntries = await getCollection('about');
const aboutEntry = aboutEntries[0];
const { data } = aboutEntry;

const title = data.title;
const description = data.description;
---

<MainLayout
  title={title}
  structuredData={{
    '@context': 'https://schema.org',
    '@type': 'WebPage',
    '@id': 'https://kphr.com/about',
    url: 'https://kphr.com/about',
    name: title,
    description: description,
    isPartOf: ISPARTOF,
    inLanguage: 'en-US',
  }}
  meta={description}
>
  <section class="bg-muted/30 w-full px-6 py-16">
    <div class="mx-auto max-w-7xl">
      <div class="mb-16 grid items-center gap-12 md:grid-cols-2">
        <div>
          <Image
            src={data.image}
            alt={data.imageAlt}
            class="shadow-card w-full max-w-md rounded-lg"
            loading="lazy"
          />
        </div>
        <div>
          <h2 class="text-foreground mb-6 text-3xl font-bold md:text-4xl">
            {data.heading}
          </h2>
          <p class="text-muted-foreground mb-6 text-lg leading-relaxed">
            {data.intro}
          </p>
          <p class="text-primary text-lg font-medium italic">
            {data.tagline}
          </p>
        </div>
      </div>

      <Card
        class="bg-gradient-primary text-primary-foreground shadow-card border-0 p-8"
      >
        <CardContent
          class="flex flex-col items-center justify-between gap-6 !p-0 md:flex-row"
        >
          <div class="flex items-center gap-4">
            <div class="text-4xl">ðŸ§©</div>
            <div>
              <h3 class="mb-2 text-xl font-bold md:text-2xl">
                {data.ctaHeading}
              </h3>
            </div>
          </div>
          <Button
            variant="secondary"
            size="lg"
            class="text-primary flex bg-white font-semibold hover:bg-white/90"
            href={`/${data.ctaButtonLink}`}
            download
          >
            {data.ctaButtonText}
          </Button>
        </CardContent>
      </Card>
    </div>
  </section>
</MainLayout>
