---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';
import Button from '@/components/ui/Button.astro';
import Card from '@/components/ui/Card.astro';
import CardContent from '@/components/ui/CardContent.astro';

const [aboutEntry] = await getCollection('about');

if (!aboutEntry) {
  throw new Error('About content entry is missing.');
}

const about = aboutEntry.data;
const ctaHref = about.ctaButtonLink ?? '/newsletter';
---

<section class="w-full px-6 py-16">
  <div class="mx-auto max-w-6xl">
    <div class="mb-16 grid items-center gap-12 md:grid-cols-2">
      <div>
        <Image
          src={about.image}
          alt={about.imageAlt}
          class="shadow-card w-full max-w-md rounded-lg"
          loading="lazy"
        />
      </div>
      <div>
        <h2 class="text-foreground mb-6 text-3xl font-bold md:text-4xl">
          {about.heading}
        </h2>
        <p class="text-muted-foreground mb-6 text-lg leading-relaxed">
          {about.intro}
        </p>
        <p class="text-primary text-lg font-medium italic">
          {about.tagline}
        </p>
      </div>
    </div>

    <Card
      class="bg-gradient-primary text-primary-foreground shadow-card border-0 p-8"
    >
      <CardContent
        class="flex flex-col items-center justify-between gap-6 !p-0 md:flex-row"
      >
        <div class="flex items-center gap-4">
          <div class="text-4xl">ðŸ§©</div>
          <div>
            <h3 class="mb-2 text-xl font-bold md:text-2xl">
              {about.ctaHeading}
            </h3>
          </div>
        </div>
        <Button
          href={ctaHref}
          variant="secondary"
          size="lg"
          class="text-primary flex bg-white font-semibold hover:bg-white/90"
        >
          {about.ctaButtonText}
        </Button>
      </CardContent>
    </Card>
  </div>
</section>
